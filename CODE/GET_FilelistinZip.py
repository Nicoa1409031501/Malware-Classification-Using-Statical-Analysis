import zipfile
import os
import glob
def list_files_in_zip(zip_file_path):
    with zipfile.ZipFile(zip_file_path, 'r') as zip_file:
        file_list = zip_file.namelist()
    return file_list

# 輸入壓縮檔的路徑
zip_file_path = '/media/cape/qe/Malware_Sample_Bazaar/2023-01-01.zip'
file_list = list_files_in_zip(zip_file_path)

# 列出所有檔案名稱'/media/cape/qe/Malware_Sample_Bazaar/
bazaar='/media/cape/qe/Malware_Sample_Bazaar/*'
for i in glob.iglob(bazaar):
    print(i)
    zip_file_path = '/media/cape/qe/Malware_Sample_Bazaar/2023-01-01.zip'
    file_list = list_files_in_zip(zip_file_path)
    with open("/media/cape/qe/List/"+str(os.path.basename(i).split(".",)[0])+".txt","w")as write:
        for file_name in file_list:
            hash=file_name.split('.',)[0]
            print(hash)
            write.write(hash+'\n')