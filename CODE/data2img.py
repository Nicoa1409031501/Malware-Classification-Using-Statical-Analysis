import os
import glob
from PIL import Image

#####################################################################
'''
This is the head of the code
'''
#####################################################################
if __name__=='__main__':
    #Setting the origin location of the samples
    Mamba_sample_path="/home/cape/Documents/mamba_dataset/MAMBA_dataset/*"
    Dike_sample_path="/home/cape/Documents/DikeDataset-main/files/malware/*"
    save_path_dike='/home/cape/Documents/Dataset/png_dike/'
    save_path_mamba='/home/cape/Documents/Dataset/png_mamba/'

    for i in glob.iglob(Dike_sample_path):
        binary_values=[]
        with open(i, 'rb') as fp:
             #讀取第一個位元組
            data = fp.read(1)
            #當讀取的位元組不等於空的就繼續執行迴圈
            while data != b'':
                #當位元組不等於空的就將位元組轉換成十進位
                binary_values.append(ord(data))
                #再讀取下一個位元組
                data = fp.read(1)

            #計算高度(這邊等於是計算長寬)
            #每64個就換行
            size = (64, int(len(binary_values)/64)+1)
            #將圖片設定成灰階
            image = Image.new('L',size)
            #將binary_values放入image中
            image.putdata(binary_values)
            image.save(save_path_dike+os.path.basename(i)+".png")
    for i in glob.iglob(Mamba_sample_path):
        binary_values=[]
        with open(i, 'rb') as fp:
             #讀取第一個位元組
            data = fp.read(1)
            #當讀取的位元組不等於空的就繼續執行迴圈
            while data != b'':
                #當位元組不等於空的就將位元組轉換成十進位
                binary_values.append(ord(data))
                #再讀取下一個位元組
                data = fp.read(1)

            #計算高度(這邊等於是計算長寬)
            #每64個就換行
            size = (64, int(len(binary_values)/64)+1)
            #將圖片設定成灰階
            image = Image.new('L',size)
            #將binary_values放入image中
            image.putdata(binary_values)
            image.save(save_path_mamba+os.path.basename(i)+".png")
